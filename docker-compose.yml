version: "3.9"

services:
  ng:
    # build: .
    image: beorn/xpilot-servers
    # image: nixos/nix:latest
    # entrypoint: nix-shell -p xpilot-ng --run \
    # entrypoint: xpilot-ng-server -reportMeta -noQuit -contactPort 2001 -clientPortStart 2000 -clientPortEnd 2999
    entrypoint: xpilot-ng-server -reportMeta -noQuit -contactPort 15400 -clientPortStart 15401 -clientPortEnd 15499
    ports:
      - "15345"
    deploy:
      replicas: 1

  bloodspilot:
    # build: .
    image: beorn/xpilot-servers
    # image: nixos/nix:latest
    # entrypoint: nix-shell -p bloodspilot-server --run \
    entrypoint: xpilots -reportMeta -contactPort 15500 -clientPortStart 15501 -clientPortEnd 15599
    ports:
      - "15346"
    deploy:
      replicas: 1
